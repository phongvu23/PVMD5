<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Hex to Dice</title>
  <style>
    body { font-family: Arial, sans-serif; max-width: 600px; margin: auto; padding: 20px; }
    input, select, button { margin-top: 10px; padding: 8px; width: 100%; }
    .result { margin-top: 20px; font-size: 1.2em; font-weight: bold; }
  </style>
</head>
<body>
  <h2>🎲 Hex to Dice Result</h2>

  <label>🔢 Nhập chuỗi hex:</label>
  <input type="text" id="hexInput" value="">

  <label>🛠️ Phương pháp chia:</label>
  <select id="methodSelect">
    <option value="auto">Auto (chia đều)</option>
    <option value="fixed">Fixed (7–7–6)</option>
  </select>

  <button onclick="convertHexToDice()">🎯 Chuyển đổi</button>

  <div class="result" id="result">👉 Kết quả sẽ hiển thị ở đây.</div>

  <script>
    function hexToDiceCustom(hexStr, method = 'auto') {
      const digits = Array.from(hexStr).filter(ch => !isNaN(parseInt(ch))).map(ch => parseInt(ch));

      let groups = [];
      if (method === 'fixed') {
        groups = [
          digits.slice(0, 7),
          digits.slice(7, 14),
          digits.slice(14, 20)
        ];
      } else if (method === 'auto') {
        const n = digits.length;
        const base = Math.floor(n / 3);
        const rem = n % 3;
        const sizes = [base + (0 < rem ? 1 : 0), base + (1 < rem ? 1 : 0), base];
        let idx = 0;
        for (const size of sizes) {
          groups.push(digits.slice(idx, idx + size));
          idx += size;
        }
      } else {
        return ["❌ Phương pháp chia không hợp lệ."];
      }

      const dice = groups.map(group => (group.reduce((a, b) => a + b, 0) % 6) + 1);
      return dice;
    }

    function convertHexToDice() {
      const hexInput = document.getElementById("hexInput");
      const method = document.getElementById("methodSelect").value;
      const hex = hexInput.value.trim();
      const result = hexToDiceCustom(hex, method);
      document.getElementById("result").textContent = `🎲 Kết quả: [${result.join(', ')}]`;
      hexInput.value = ""; // 🔥 Tự động xóa nội dung sau khi xử lý
    }
  </script>
</body>
</html>
